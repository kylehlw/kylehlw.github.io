---
layout: post
title: "Vim 编辑器入门指南"
date: 2022-02-01
categories: [编程工具]
tags: [vim, 编辑器, 效率工具]
---
# Vim 编辑器入门指南

Vim 是一个强大的文本编辑器，虽然学习曲线较陡，但掌握后能显著提高编程效率。本文将介绍 Vim 的基础知识和常用命令。

## 为什么选择 Vim？

- 完全键盘操作，无需鼠标
- 高度可定制
- 跨平台支持
- 强大的插件系统
- 高效的文本编辑能力

## 基本模式

Vim 有几种主要模式：

1. **普通模式（Normal Mode）**

   - 用于导航和执行命令
   - 按 `Esc` 键进入
2. **插入模式（Insert Mode）**

   - 用于输入文本
   - 按 `i` 键进入
3. **可视模式（Visual Mode）**

   - 用于选择文本
   - 按 `v` 键进入

## 常用命令

### 移动命令

- `h` - 左移
- `j` - 下移
- `k` - 上移
- `l` - 右移
- `w` - 移动到下一个单词
- `b` - 移动到上一个单词
- `0` - 移动到行首
- `$` - 移动到行尾

### 编辑命令

- `i` - 在当前位置插入
- `a` - 在当前位置后插入
- `dd` - 删除当前行
- `yy` - 复制当前行
- `p` - 粘贴
- `u` - 撤销

### 保存和退出

- `:w` - 保存文件
- `:q` - 退出
- `:wq` - 保存并退出
- `:q!` - 强制退出不保存

## 进阶技巧

**组合命令**

- `ciw` - 删除当前单词并进入插入模式
- `dd` - 删除当前行
- `yy` - 复制当前行

**搜索和替换**

- `/文本` - 搜索文本
- `:%s/旧文本/新文本/g` - 全局替换

From [here](https://youtu.be/l6pIDcMsz8w?si=nXZsvioZlEQQrvGH)

### 技巧一：快速跳转

在日常编码中，我们花费大量时间在浏览和定位代码上，而不是输入新的代码。因此，掌握高效的跳转方法可以极大提升我们的工作效率。

#### 行号跳转

* `gg` - 跳转到文件开头
* `G` - 跳转到文件末尾
* `{行号}G` - 跳转到指定行
* `set relativenumber` - 显示相对行号
* `vi +100 filename` - 打开文件并跳转到第100行

#### 窗口内跳转

* `H` - 跳转到当前窗口首行
* `M` - 跳转到窗口中间
* `L` - 跳转到窗口底部

#### 搜索跳转

* `/pattern` - 向下搜索
* `?pattern` - 向上搜索
* `n` / `N` - 重复搜索
* `*` - 搜索光标下的单词
* `#` - 反向搜索光标下的单词

#### 跳转历史

* `:jumps` - 查看跳转历史记录
* `Ctrl-O` - 跳回上一个位置
* `Ctrl-I` - 跳到下一个位置
* `:changes` - 查看编辑位置历史
* `g;` - 跳到较老的修改位置
* `g,` - 跳到较新的修改位置

#### 标记与跳转

* `m{a-zA-Z}` - 设置标记
* `'{mark}` - 跳转到标记行

### 技巧二：行内移动

在单行内快速移动光标是提升 Vim 使用效率的关键。

#### 基本移动

* `0` - 跳到行首
* `$` - 跳到行尾
* `^` - 跳到行内第一个非空字符
* `g_` - 跳到行内最后一个非空字符

#### 精确定位

* `f{char}` - 向后查找字符并跳转
* `F{char}` - 向前查找字符并跳转
* `t{char}` - 向后查找字符并跳到其前一个位置
* `T{char}` - 向前查找字符并跳到其后一个位置
* `;` - 重复上次的字符查找
* `,` - 反向重复上次的字符查找

#### 单词移动

* `w` - 移动到下一个单词开头
* `e` - 移动到当前单词结尾
* `b` - 移动到上一个单词开头
* `W/E/B` - 同上，但以空格为分隔符

### 技巧三：高效编辑

Vim 的强大之处在于其编辑命令的组合能力。

#### 动作命令

* `c` - change (修改)
* `d` - delete (删除)
* `y` - yank (复制)
* `v` - visual (可视化选择)

#### 文本对象

* `w` - word (单词)
* `s` - sentence (句子)
* `p` - paragraph (段落)
* `(` or `)` - 圆括号内的内容
* `{` or `}` - 花括号内的内容
* `[` or `]` - 方括号内的内容

#### 重复与撤销

* `.` - 重复上次的修改
* `u` - 撤销上次修改
* `Ctrl-R` - 重做(撤销的反向操作)

### 技巧四：Buffer Windows Tab

#### Buffer 管理

* `:ls` - 列出所有缓冲区
* `:b {number}` - 切换到指定编号的缓冲区
* `:bn` / `:bp` - 切换到下一个/上一个缓冲区
* `:bd` - 关闭当前缓冲区

#### Window 操作

* `:sp` - 水平分割窗口
* `:vsp` - 垂直分割窗口
* `Ctrl-w h/j/k/l` - 在窗口间移动
* `Ctrl-w =` - 使所有窗口等宽、等高

#### Tab 页管理

* `:tabnew` - 创建新标签页
* `gt` / `gT` - 切换到下一个/上一个标签页
* `:tabclose` - 关闭当前标签页

### 技巧五：寄存器

* `:reg` - 查看寄存器内容
* `"ap` - 粘贴 a 寄存器内容
* `q` - 录制宏
* `@` - 执行宏

### 技巧六：Vimrc 配置

#### 基础配置

* 语法高亮
* 显示行号
* 设置 Tab 缩进
* 配置文件编码

#### 快捷键设置

* `<leader>v` - 快速打开配置文件
* `<leader>q` - 强制退出
* `<leader>y/p` - 系统剪贴板复制/粘贴

#### 实用替代键

* `Ctrl-[` - 替代 Esc 键
* `ZZ` - 替代 `:wq`
* `ZQ` - 替代 `:q!`

### 技巧七：插件管理

推荐使用 vim-plug 作为插件管理器，常用插件包括：

* fzf：模糊查找工具
* vim-easy-align：代码对齐
* vim-commentary：注释插件
* vim-gitgutter：显示 git diff 信息
* tokyonight：配色方案
* lightline：状态栏插件
* vim-mucomplete：代码补全
* SearchComplete：搜索补全
* matchup：增强 % 跳转功能

## 学习建议

1. 从基础命令开始
2. 每天练习常用命令
3. 使用 Vim 的教程模式（`:vimtutor`）
4. 逐步学习更高级的功能

## 结语

Vim 的学习是一个渐进的过程，不要期望在短时间内掌握所有功能。持续练习和实际使用是提高 Vim 技能的最佳方式。记住，Vim 的目标是提高你的编辑效率，所以要根据自己的需求来学习和使用相应的功能。
